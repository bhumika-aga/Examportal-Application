services:
  # Backend: Spring Boot Application
  - type: web
    name: examportal-server
    runtime: docker
    rootDir: examserver
    envVars:
      - key: PORT
        value: 8080
      - key: JWT_SECRET
        generateValue: true
      - key: JWT_EXPIRATION
        value: "36000000"
      - key: CORS_ALLOWED_ORIGINS
        sync: false
    plan: free
    healthCheckPath: /actuator/health
    branch: main

  # Frontend: React Static Site
  - type: static
    name: examportal-client
    rootDir: examfront
    buildCommand: npm install && npm run build
    staticPublishPath: ./dist
    envVars:
      - key: VITE_API_URL
        fromService:
          type: web
          name: examportal-server
          property: host
    plan: free
    branch: main
